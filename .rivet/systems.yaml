project:
  name: Rivet
  principles:
    - Passive and zero-maintenance - set it and forget it
    - Provides a linguinstic lens for AI to compare against code.
  terms:
    linguistic-layer: The terminology and naming conventions used to describe code - distinct from the code itself
  deprecated-terms:
    glean:
      use: session-harvest
      reason: Renamed for clarity - session-harvest pairs with deep-harvest
    harvest:
      use: deep-harvest
      reason: Renamed for clarity - deep-harvest is for mining old transcripts
  decisions: []
  requirements: []
systems:
  CLI:
    description: |
      Command-line interface for managing rivet files. Parses arguments and
      routes to appropriate command handlers. Entry point for all user interaction.
    boundaries:
      - Argument parsing and command routing only
      - Does not read/write rivet files directly - delegates to Parser
      - Does not generate prompt content - delegates to Prompts
    relationships:
      - - calls
        - Parser
      - - calls
        - Prompts
  Parser:
    description: |
      Reads, writes, and manages the rivet YAML file. Handles file discovery,
      initialization from templates, and atomic updates.
    boundaries:
      - File I/O operations for systems.yaml
      - Template resolution for initialization
      - Does not validate business rules - only structural YAML operations
    relationships:
      - - depends_on
        - Schema
  Prompts:
    description: |
      Generates context prompts for AI assistants. Transforms rivet file data
      into formatted markdown for session-start, session-harvest, deep-harvest, and init.
    boundaries:
      - Prompt generation and formatting only
      - Does not modify rivet files - read-only access
      - Output format is markdown for AI consumption
    relationships:
      - - depends_on
        - Schema
      - - calls
        - Parser
  Schema:
    description: |
      TypeScript type definitions for rivet file structure. Defines the shape
      of projects, systems, terms, and relationships.
    boundaries:
      - Type definitions only - no runtime logic
      - Single source of truth for rivet file structure
layout: ~
